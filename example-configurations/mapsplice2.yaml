destination_path: mapsplice_out

constants:
    - &mapsplice_chr_dir  input/chroms_for_mapsplice
    - &mapsplice_index  index/built_bowtie_index

steps:
    #################
    ## Source step ##
    #################
    fastq_source_1M (fastq_source):
        sample_to_files_map:
            rna_sim_1M:
                - input/reads_1.fastq
                - input/reads_2.fastq
        paired_end: yes
        first_read: 1.fastq
        second_read: 2.fastq

    AR_1M (adapterremoval):
        _depends: fastq_source_1M
        cores: 2
        treatAs: paired
        adapter1: AGATCGGAAGAGCACACGTCTGAACTCCAGTCACNNNNNNATCTCGTATGCCGTCTTCTGCTTG
        adapter2: AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGTAGATCTCGGTGGTCGCCGTATCATT
        collapse: False
        trimns: True
        trimqualities: True
        minquality: 20
        threads: 2
        minlength: 30

    mapsplice2_1M (mapsplice2):
        _depends: AR_1M
        _connect:
            in/first_read: AR_1M/pair1.truncated
            in/second_read: AR_1M/pair2.truncated
        cores: 2
        c: *mapsplice_chr_dir
        x: *mapsplice_index
        p: 10

tools:
    adapterremoval:
        path: 'AdapterRemoval'
        get_version: '--version'

    mapsplice2:
        path: ['/home/alexander/workspace/git/uap/python_env/bin/python2.7', '/home/alexander/Programme/MapSplice-v2.2.1/mapsplice.py']
        get_version: '--version'
        exit_code: 2

    pwd:
        path: 'pwd'
        get_version: '--version'

    mkdir:
        path: 'mkdir'
        get_version: '--version'

    mv:
        path: 'mv'
        get_version: '--version'

    cp:
        path: 'cp'
        get_version: '--version'
        exit_code: 0

    rm:
        path: 'rm'
        get_version: '--version'
        exit_code: 0